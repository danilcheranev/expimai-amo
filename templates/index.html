<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>ExpimAI ‚Äì –ø–∞–Ω–µ–ª—å</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="container">
    <h2>ExpimAI ‚Äì AI-–ø–æ–º–æ—â–Ω–∏–∫</h2>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:</p>
    <button id="btn-manual">üîç –ù–∞–π—Ç–∏ –¥—É–±–ª–∏ (manual)</button>
    <button id="btn-auto">ü§ñ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥—É–±–ª–∏ (auto)</button>
    <pre id="output" style="white-space: pre-wrap; margin-top: 1em;"></pre>
  </div>

  <script>
    async function callDuplicates(mode) {
      const responsibleId = 123; // –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞
      const url = `/api/duplicates?mode=${mode}&responsible_id=${responsibleId}`;
      document.getElementById('output').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶';
      try {
        const res = await fetch(url, { method: 'POST' });
        const data = await res.json();
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById('output').textContent = '–û—à–∏–±–∫–∞: ' + err;
      }
    }

    document.getElementById('btn-manual').onclick = () => callDuplicates('manual');
    document.getElementById('btn-auto').onclick   = () => callDuplicates('auto');
  </script>
</body>
</html>
